//Bibliotecas
#include <Arduino.h>
#include <U8g2lib.h>
#include <Bounce2.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

//Definições
#define Botao 19
#define SCREEN_WIDTH 128 
#define SCREEN_HEIGHT 64 
#define SCREEN_ADDRESS 0x3C 
#define OLED_RESET -1

//Objetos
U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, U8X8_PIN_NONE);
				Bounce2::Button botao = Bounce2::Button(); 

//instancia
Adafruit_SSD1306 oled(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

//Variaveis
bool ativacao = 1;
int posicao = 0;

// 'mapa7', 128x64px
const unsigned char mapa7 [] PROGMEM = {
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
	0xfc, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x00, 0x01, 0xff, 0xff, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x3f, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xef, 0xff, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xef, 0xe7, 0xff, 0xbf, 0xff, 0x8f, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xef, 0xfd, 0xdf, 0xb5, 0xff, 0x8f, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xef, 0xbf, 0xfd, 0xb7, 0xff, 0x87, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x87, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x87, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x87, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xff, 0xff, 0xff, 0xe3, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 
	0xe0, 0xf7, 0x00, 0x0e, 0xf0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0x00, 0x03, 0xff, 0x87, 
	0xe0, 0xfe, 0x00, 0x07, 0xf0, 0xff, 0xfe, 0x7f, 0xfd, 0xff, 0xf8, 0x06, 0x1f, 0xff, 0xff, 0x87, 
	0xe0, 0xfe, 0x00, 0x07, 0xf0, 0xff, 0xfe, 0x0f, 0xfc, 0x3f, 0xfc, 0x0e, 0x1f, 0xff, 0xff, 0x87, 
	0xe0, 0xf7, 0x00, 0x0f, 0xf0, 0xff, 0xf8, 0x01, 0xf0, 0x0f, 0xf0, 0x1e, 0x1f, 0xff, 0xff, 0x87, 
	0xe0, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xfe, 0x0f, 0xfc, 0x0f, 0x83, 0x3e, 0x1f, 0xff, 0xff, 0x87, 
	0xe0, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xff, 0xff, 0xfb, 0xff, 0x3f, 0xfe, 0x1f, 0xff, 0xff, 0x87, 
	0xe0, 0xff, 0xbd, 0xff, 0xf0, 0xff, 0xef, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x1f, 0xff, 0xff, 0x87, 
	0xe0, 0xff, 0xff, 0xff, 0xf0, 0xff, 0xc7, 0x80, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x01, 0xff, 0x87, 0x80, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0x03, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x03, 0x81, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x03, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0x83, 0x8f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x03, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0x8f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x03, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0x9f, 0x8f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0x9f, 0x8f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x07, 
	0xc0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xef, 0x8f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc7, 0x8f, 0xff, 0xff, 0xfe, 0x00, 0x7f, 0xfe, 0x00, 0x0f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0x87, 0x8f, 0xff, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x0f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0x03, 0x8f, 0xff, 0xff, 0xfe, 0x3f, 0xff, 0xff, 0xff, 0x0f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xc1, 0x8f, 0xff, 0xff, 0xfc, 0x7f, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xef, 0x8f, 0xff, 0xff, 0xfc, 0x7f, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0xff, 0xff, 0xfc, 0x7f, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0xff, 0xff, 0xfc, 0x7f, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xe3, 0xff, 0xe7, 0xf8, 0x0f, 0x8f, 0xff, 0xff, 0xfc, 0x7f, 0xff, 0xff, 0xff, 0x8f, 
	0xe0, 0xff, 0xe0, 0x7f, 0xc1, 0xfc, 0x1f, 0x8f, 0xff, 0xff, 0xfe, 0x3f, 0xff, 0xff, 0xbf, 0x0f, 
	0xe0, 0xff, 0xc0, 0x1f, 0x80, 0x38, 0x1f, 0x8f, 0xff, 0xff, 0xfe, 0x3f, 0xbf, 0xff, 0xdf, 0x07, 
	0xe0, 0xff, 0xe1, 0xff, 0xc1, 0xff, 0xbf, 0x8f, 0xff, 0xff, 0xfe, 0x3f, 0x83, 0xfc, 0x1f, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x8f, 0xff, 0xff, 0xfe, 0x3f, 0x07, 0xfc, 0x0f, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xfe, 0x3f, 0x03, 0xfc, 0x0f, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xfc, 0x3f, 0x87, 0xfc, 0x1f, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x07, 0xf7, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xc7, 0xfc, 0x3f, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xe0, 0x00, 0x7f, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xf8, 0x01, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x3f, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x3f, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x3f, 0xff, 0xff, 0xff, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 
	0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
	0xff, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
};

//prototipo
void inicio(void);
void principal(void);
void final(void);
void atualizaBotao(void);
float lerTemperatura(void);
float lerUmidade(void);

void setup() 
{
  u8g2.begin();
  botao.attach(Botao, INPUT_PULLUP);
  botao.setPressedState(LOW);
  oled.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS);
}

void loop() 
{
  atualizaBotao();
  if (posicao == 0)
    inicio();
  if (posicao == 1)
    principal();
    if(posicao == 2)
    final();
}

void inicio()

{
  u8g2.clearBuffer();
  u8g2.drawRFrame(0, 0, 126, 62, 2); 
  u8g2.setFont(u8g2_font_sisterserif_tr);
  u8g2.drawStr(15, 25, "Ola seja bem ");
  u8g2.drawStr(30, 45, "vindo(a)!");
  u8g2.sendBuffer();
}

void atualizaBotao()

{
  botao.update();
  if (botao.pressed())
  {
    posicao = posicao + 1;
    if (posicao > 2)
      posicao = 0;
  }
}

void principal()

{
  u8g2.clearBuffer();
  u8g2.drawRFrame(0, 0, 126, 62, 2); 
  u8g2.setFont(u8g2_font_efraneextracondensed_te);
  u8g2.drawStr(15, 25, "Aperte o botão para");
  u8g2.drawStr(25, 45, "direcionamento");
  u8g2.sendBuffer();
}

void final()

{
  oled.clearDisplay();
  oled.drawBitmap(0,0, mapa7, 128,64, WHITE);
  oled.display();
}